<nav class="navbar" [class.scrolled]="isScrolled">
  <div class="navbar-container">
    <!-- Logo & Brand -->
    <a routerLink="/" class="navbar-brand" aria-label="Retour à l'accueil">
      <div class="logo-wrapper">
        <svg
          class="logo-icon"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M3 9L12 3L21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9Z"
            fill="url(#gradient)"
          />
          <path
            d="M9 22V12H15V22"
            stroke="white"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <defs>
            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#025ddd" />
              <stop offset="100%" stop-color="#0047b3" />
            </linearGradient>
          </defs>
        </svg>
      </div>
      <span class="logo-text">Serv<span class="highlight">Connect</span></span>
      <span class="logo-badge">Pro</span>
    </a>

    <!-- Menu Desktop -->
    <ul class="nav-menu">
      <li class="nav-item">
        <a
          routerLink="/"
          class="nav-link"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          <i class="pi pi-home nav-icon"></i> <span>Accueil</span>
        </a>
      </li>

      <li class="nav-item">
        <a routerLink="/explore" class="nav-link" routerLinkActive="active">
          <i class="pi pi-search nav-icon"></i> <span>Explorer</span>
        </a>
      </li>

      <li class="nav-item">
        <a routerLink="/services" class="nav-link" routerLinkActive="active">
          <i class="pi pi-cog nav-icon"></i> <span>Services</span>
        </a>
      </li>

      <li class="nav-item">
        <a routerLink="/pricing" class="nav-link" routerLinkActive="active">
          <i class="pi pi-dollar nav-icon"></i> <span>Tarifs</span>
        </a>
      </li>

      <li class="nav-item">
        <a routerLink="/contact" class="nav-link" routerLinkActive="active">
          <i class="pi pi-phone nav-icon"></i> <span>Contact</span>
        </a>
      </li>

      <!-- Provider -->
      <li *ngIf="isLoggedIn && userRole === 'provider'" class="nav-item">
        <a routerLink="/my-services" class="nav-link">
          <i class="pi pi-briefcase nav-icon"></i> <span>Mes services</span>
        </a>
      </li>

      <li *ngIf="isLoggedIn && userRole === 'provider'" class="nav-item">
        <a routerLink="/upcoming-services" class="nav-link">
          <i class="pi pi-calendar nav-icon"></i> <span>Réservations</span>
        </a>
      </li>

      <!-- Admin -->
      <li *ngIf="isLoggedIn && userRole === 'admin'" class="nav-item">
        <a routerLink="/admin" class="nav-link">
          <i class="pi pi-shield nav-icon"></i> <span>Dashboard Admin</span>
        </a>
      </li>
    </ul>

    <!-- Right buttons: dynamic -->
    <div class="navbar-actions">
      <!-- Notifications -->
      <button class="btn-notification" *ngIf="isLoggedIn">
        <i class="pi pi-bell"></i>
        <span class="notification-badge">{{ notificationsCount }}</span>
      </button>

      <!-- Non connecté -->
      <ng-container *ngIf="!isLoggedIn">
        <button class="btn-secondary" routerLink="/login">
          <i class="pi pi-user"></i> Connexion
        </button>
        <button class="btn-primary" routerLink="/register">
          <i class="pi pi-sparkles"></i> S'inscrire
        </button>
      </ng-container>

      <!-- Connecté -->
      <ng-container *ngIf="isLoggedIn">
        <div class="user-profile">
          <i class="pi pi-user"></i>
          <span>{{ userName }}</span>
        </div>
        <button class="btn-logout" (click)="logout()">
          <i class="pi pi-sign-out"></i> Déconnexion
        </button>
      </ng-container>

      <!-- Mobile toggle -->
      <button class="mobile-menu-toggle" (click)="toggleMobileMenu()">
        <span class="hamburger" [class.active]="isMobileMenuOpen">
          <span></span><span></span><span></span>
        </span>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" [class.open]="isMobileMenuOpen">
    <ul class="mobile-nav-menu">
      <li class="mobile-nav-item">
        <a routerLink="/" class="mobile-nav-link" (click)="closeMobileMenu()">
          <i class="pi pi-home"></i> Accueil
        </a>
      </li>

      <li class="mobile-nav-item">
        <a
          routerLink="/explore"
          class="mobile-nav-link"
          (click)="closeMobileMenu()"
        >
          <i class="pi pi-search"></i> Explorer
        </a>
      </li>

      <li class="mobile-nav-item">
        <a
          routerLink="/services"
          class="mobile-nav-link"
          (click)="closeMobileMenu()"
        >
          <i class="pi pi-cog"></i> Services
        </a>
      </li>

      <li class="mobile-nav-item">
        <a
          routerLink="/pricing"
          class="mobile-nav-link"
          (click)="closeMobileMenu()"
        >
          <i class="pi pi-dollar"></i> Tarifs
        </a>
      </li>

      <li class="mobile-nav-item">
        <a
          routerLink="/contact"
          class="mobile-nav-link"
          (click)="closeMobileMenu()"
        >
          <i class="pi pi-phone"></i> Contact
        </a>
      </li>

      <!-- Provider -->
      <li *ngIf="isLoggedIn && userRole === 'provider'" class="mobile-nav-item">
        <a routerLink="/my-services" class="mobile-nav-link">
          <i class="pi pi-briefcase"></i> Mes services
        </a>
      </li>

      <!-- Actions Mobile -->
      <div class="mobile-auth-buttons">
        <!-- Not logged -->
        <ng-container *ngIf="!isLoggedIn">
          <button
            class="btn-secondary-mobile"
            routerLink="/login"
            (click)="closeMobileMenu()"
          >
            <i class="pi pi-user"></i> Connexion
          </button>
          <button
            class="btn-primary-mobile"
            routerLink="/register"
            (click)="closeMobileMenu()"
          >
            <i class="pi pi-sparkles"></i> S'inscrire
          </button>
        </ng-container>

        <!-- Logged -->
        <ng-container *ngIf="isLoggedIn">
          <p class="mobile-user-info">
            <i class="pi pi-user"></i> {{ userName }}
          </p>
          <button class="btn-logout-mobile" (click)="logout()">
            <i class="pi pi-sign-out"></i> Déconnexion
          </button>
        </ng-container>
      </div>
    </ul>
  </div>
</nav>
